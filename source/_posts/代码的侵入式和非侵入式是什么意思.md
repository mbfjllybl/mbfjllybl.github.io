---
title: 代码的侵入式和非侵入式是什么意思
date: 2021-11-10 11:38:33
updated:
tags: 侵入式/非侵入式
categories:
- [设计模式]
keywords: 
description:
top_img:
comments:
cover:
toc:
toc_number:
copyright:
copyright_author:
copyright_author_href:
copyright_url:
copyright_info:
mathjax:
katex:
aplayer:
highlight_shrink:
aside:
---

# 代码的侵入式和非侵入式是什么意思

#### 侵入式（引入或继承了别的包或框架）

从字面意思理解，就是你的代码里已经嵌入了别的代码，这些代码可能是你引入过的框架，也可能是你通过接口继承得来的（比如：Java中的继承），这样你就可以拥有侵入代码的一些功能。所以我们就称这段代码是侵入式代码。非要说侵入式代码的优点：通过侵入代码与你的代码结合可以更好的利用侵入代码提供给的功能。缺点：框架外代码就不能使用了，不利于代码复用。依赖太多重构代码太痛苦了。

#### 非侵入式（没有依赖，自主研发）

正好与侵入式相反，你的代码没有引入别的包或框架，完完全全是自主开发。比如go中的接口，不需要显示的继承接口，只需要实现接口的所有方法就叫实现了该接口，即便该接口删掉了，也不会影响我，所有go语言的接口数非侵入式接口；再如Python所崇尚的鸭子类型。优点：代码可复用，方便移植。非侵入式也体现了代码的设计原则：高内聚，低耦合

#### 对比

假设大家都想要把用户代码塞到一个框架里。两者区别就出来了： 侵入式的做法就是要求用户代码“知道”框架的代码，表现为用户代码需要继承框架提供的类。 非侵入式则不需要用户代码引入框架代码的信息，从类的编写者角度来看，察觉不到框架的存在。 举个栗子： 使用struts时，需要继承一些struts的类，这时struts侵入到了我的代码里。 使用spring时，编写一些业务类的时候不需要继承spring特定的类，通过配置完成依赖注入后就可以使用，此时，spring就没有侵入到我业务类的代码里。 世界上每一个物体的存在，必有其过人之处，但是人无完人，不可能存在永远完美的东西存在，其也会受到时代潮流的影响： 侵入式让用户代码产生对框架的依赖，这些代码不能在框架外使用，不利于代码的复用（缺点）。但侵入式可以使用户跟框架更好的结合，更容易更充分的利用框架提供的功能（优点）。 非侵入式的代码则没有过多的依赖，可以很方便的迁移到其他地方。但是与用户代码互动的方式可能就比较复杂。 这两种方式都有各自的利弊，主要看实际开发时怎么选择他了。